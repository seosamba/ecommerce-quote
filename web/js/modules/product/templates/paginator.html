<div class="paginator" data-collection="<%= collection %>">
    <% if (firstPage != currentPage) { %>
        <a href="#" class="page" data-page="first">First</a>
    <% } %>

    <% if (currentPage > firstPage) { %>
        <a href="#" class="page" data-page="prev">Previous</a>
    <% } %>

    <% for (p=currentPage-3; p<=currentPage+3; p++) { %>
        <% if (p < firstPage || p > lastPage) continue %>
            <% if (currentPage == p) { %>
                <span class="page selected"><%= p+1 %></span>
            <% } else { %>
                <a href="#" class="page" data-page="<%= p %>"><%= p+1 %></a>
            <% } %>
    <% } %>

    <% if (currentPage < totalPages) { %>
        <a href="#" class="page" data-page="next">Next</a>
    <% } %>

    <% if (lastPage != currentPage) { %>
        <a href="#" class="page" data-page="last">Last</a>
    <% } %>
</div>